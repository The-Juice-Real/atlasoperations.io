<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Oyuka</title>
    <!-- Three.js & GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
    
    <!-- Firebase SDKs (Compat version) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400&family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">
    <style>
        /* --- Core Reset --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0;
            overflow-x: hidden;
            overflow-y: auto;
            background-color: #050505;
            font-family: 'Montserrat', sans-serif;
            color: white;
        }

        #canvas-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100vh;
            z-index: 0;
        }

        /* --- UI Layers --- */
        #ui-layer {
            position: relative;
            width: 100%;
            height: 100vh; /* Full viewport height */
            min-height: 600px; /* Prevent crunching on landscape mobile */
            z-index: 2;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.8) 150%);
        }

        h1 {
            font-family: 'Cinzel', serif;
            /* Fluid typography: scales between 3rem and 6rem based on viewport width */
            font-size: clamp(3rem, 12vw, 6rem); 
            letter-spacing: clamp(0.2rem, 2vw, 0.5rem);
            margin: 0;
            text-transform: uppercase;
            line-height: 1.1;
            text-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
            background: linear-gradient(to right, #fff, #ffb6c1, #fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: shine 5s linear infinite;
        }

        p.subtitle {
            font-size: clamp(1rem, 4vw, 1.3rem);
            letter-spacing: 0.15rem;
            margin-top: 1.5rem;
            color: #dcdcdc;
            max-width: 90%;
            width: 600px;
            line-height: 1.6;
        }

        .hint {
            position: absolute;
            bottom: 15vh;
            font-size: 0.8rem;
            letter-spacing: 0.2rem;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.5);
            animation: pulse 2s infinite;
            width: 100%;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 30px;
            font-size: 2rem;
            color: rgba(255,255,255,0.3);
            animation: bounce 2s infinite;
        }

        /* --- Letters Section --- */
        #letters-feed {
            position: relative;
            z-index: 2;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 50px 15px 120px 15px; /* More bottom padding for FAB on mobile */
            background: linear-gradient(to bottom, transparent, #000 15%);
        }

        .paper {
            background: #fdfbf0;
            background-image: 
                linear-gradient(to right, rgba(0,0,0,0.02) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0,0,0,0.02) 1px, transparent 1px);
            background-size: 20px 20px;
            color: #4a4a4a;
            /* Responsive padding inside the paper */
            padding: clamp(25px, 6vw, 60px);
            width: 100%;
            max-width: 700px;
            border-radius: 2px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            font-family: 'Dancing Script', cursive;
            /* Responsive font size for the letter text */
            font-size: clamp(1.2rem, 3.5vw, 1.5rem);
            line-height: 1.6;
            position: relative;
            margin-bottom: 50px;
            transition: transform 0.3s ease;
        }
        
        .paper:hover { transform: scale(1.01); }
        .paper:nth-child(even) { transform: rotate(1deg); }
        .paper:nth-child(odd) { transform: rotate(-1deg); }

        /* Remove rotation on very small screens to prevent layout shifting */
        @media (max-width: 400px) {
            .paper:nth-child(even), .paper:nth-child(odd) { transform: none; }
        }

        .paper::before {
            content: '';
            position: absolute;
            top: -12px; left: 50%;
            transform: translateX(-50%);
            width: clamp(60px, 15vw, 100px); 
            height: 25px;
            background: rgba(255,255,255,0.3);
            border-top: 1px solid rgba(255,255,255,0.4);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .paper h2 {
            font-family: 'Cinzel', serif;
            font-size: clamp(1.4rem, 5vw, 1.8rem);
            border-bottom: 2px solid #d4c5a0;
            padding-bottom: 10px;
            margin-bottom: 20px;
            color: #2c2c2c;
            text-align: center;
        }
        
        .paper-date {
            position: absolute;
            top: 20px; right: 20px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.7rem;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Adjust date position on mobile */
        @media (max-width: 500px) {
            .paper-date { top: 10px; right: 10px; font-size: 0.6rem; }
        }

        .paper ul {
            list-style: none;
            padding-left: 15px;
            margin: 20px 0;
            border-left: 3px solid #e0d0b0;
        }

        .paper li { margin-bottom: 10px; font-style: italic; }
        .signature { margin-top: 30px; text-align: right; font-weight: bold; font-size: 1.1em; }

        /* --- Write Button (FAB) --- */
        #fab-write {
            position: fixed;
            bottom: 30px; right: 30px;
            width: 60px; height: 60px;
            background: #d4af37;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
            z-index: 10;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid #fff;
            -webkit-tap-highlight-color: transparent;
        }
        #fab-write:hover { transform: scale(1.1); background: #f0c750; }
        #fab-write:active { transform: scale(0.9); }
        #fab-write svg { width: 30px; height: 30px; fill: #fff; }

        /* --- Modal --- */
        #write-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); /* Darker overlay */
            z-index: 20;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(5px); /* Modern blur effect */
        }
        
        #write-modal.active { display: flex; opacity: 1; }

        .modal-paper {
            background: #fdfbf0;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border-radius: 4px;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
        }

        .close-btn {
            position: absolute;
            top: 10px; right: 15px;
            font-size: 2rem;
            cursor: pointer;
            color: #555;
            font-family: 'Montserrat', sans-serif;
            padding: 10px; /* Larger touch target */
            line-height: 0.5;
        }

        .input-group { margin-bottom: 20px; }
        label { display: block; font-family: 'Cinzel', serif; color: #555; margin-bottom: 8px; font-size: 0.9rem; }
        
        input, textarea {
            width: 100%;
            background: transparent;
            border: 2px solid #e0d0b0; /* Boxed input for easier tapping */
            border-radius: 4px;
            font-family: 'Dancing Script', cursive;
            font-size: 18px; /* Prevents iOS auto-zoom on focus (must be >16px) */
            color: #333;
            outline: none;
            padding: 10px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }
        
        input:focus, textarea:focus { border-color: #d4af37; background: rgba(255,255,255,0.5); }
        textarea { resize: vertical; min-height: 150px; line-height: 1.5; }

        button.send-btn {
            background: #2c2c2c;
            color: #d4af37;
            border: none;
            padding: 15px 30px;
            font-family: 'Cinzel', serif;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
            margin-top: 10px;
            border-radius: 4px;
            -webkit-appearance: none; /* iOS Reset */
        }
        button.send-btn:hover { background: #000; }
        button.send-btn:disabled { background: #555; cursor: not-allowed; opacity: 0.7; }

        /* Animations */
        @keyframes shine { to { background-position: 200% center; } }
        @keyframes pulse { 0% { opacity: 0.3; } 50% { opacity: 0.8; } 100% { opacity: 0.3; } }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }
        
        /* Loader */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 100;
            display: flex; justify-content: center; align-items: center;
            color: white; font-family: 'Cinzel', serif;
            transition: opacity 1s ease;
        }
    </style>
</head>
<body>

    <div id="loader">Loading the stars...</div>

    <div id="canvas-container"></div>

    <!-- Section 1: Hero -->
    <div id="ui-layer">
        <h1 id="main-title">Oyuka</h1>
        <p class="subtitle" id="subtitle">You are the gravity that holds my universe together.</p>
        <div class="hint">Click & Hold</div>
        <div class="scroll-indicator">âŒ„</div>
    </div>

    <!-- Section 2: Letters Feed -->
    <div id="letters-feed">
        <!-- Original Pinned Letter -->
        <div class="paper" style="transform: rotate(-1deg);">
            <div class="paper-date">Pinned</div>
            <h2>Dear Oyuka,</h2>
            <p>I write to you from a coffee shop that's playing all kinds of love songs. These love songs remind me of how I should've treated you.</p>
            <p>I lost control and said crazy things I didn't mean. I had no control of my thoughts and my mouth. I just spat out of anger like a fool.</p>
            <p>Here's what I think of you:</p>
            <ul>
                <li>Oyuka is a soul that sees my soul.</li>
                <li>Oyuka is someone that gets me.</li>
                <li>Oyuka makes anywhere feel like home. Even a dirty office floor.</li>
            </ul>
            <p>I am sorry for the things I said. I have no excuse but to say that I was being completely stupid.</p>
            <p>You have given me many chances no matter what. And you have apologized and stuck with me even when my ego couldn't let me admit that I already accepted you back.</p>
            <p>I will let you go if I went too far this time.</p>
            <p>However, if there's still a part of you that wants to talk it out, here's my pathetic attempt to get that chance.</p>
            <p>Nothing thought out. I speak purely from my soul to your soul.</p>
            <div class="signature">
                Thank you for everything,<br>
                Juice
            </div>
        </div>
        
        <!-- Dynamic Letters will appear here -->
        <div id="dynamic-letters-container" style="width: 100%; display: flex; flex-direction: column; align-items: center;"></div>
    </div>

    <!-- Write Button -->
    <div id="fab-write" title="Write a Letter">
        <svg viewBox="0 0 24 24">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
        </svg>
    </div>

    <!-- Write Modal -->
    <div id="write-modal">
        <div class="modal-paper">
            <div class="close-btn" id="close-modal">&times;</div>
            <h2>New Letter</h2>
            <div class="input-group">
                <label>From</label>
                <input type="text" id="sender-input" placeholder="Your Name" value="Juice">
            </div>
            <!-- Added Heading Input -->
            <div class="input-group">
                <label>Heading</label>
                <input type="text" id="heading-input" placeholder="e.g. Dear Oyuka," value="Dear Oyuka,">
            </div>
            <div class="input-group">
                <label>Message</label>
                <textarea id="message-input" placeholder="Pour your soul here..."></textarea>
            </div>
            <button class="send-btn" id="send-letter-btn">Send to the Stars</button>
        </div>
    </div>

    <!-- --- Scripts --- -->
    <script>
        // --- Firebase Config ---
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "AIzaSyCXgMC4AKWvbyisd7gIPv0dB4fq_5w4G4I",
            authDomain: "oyuka-love.firebaseapp.com",
            projectId: "oyuka-love",
            storageBucket: "oyuka-love.firebasestorage.app",
            messagingSenderId: "363955825504",
            appId: "1:363955825504:web:6a9c9d3faace9bb3ca8c05",
            measurementId: "G-J5VGBZBGE4"
        };
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'oyuka-love-app';

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // --- Webhook ---
        const SMS_WEBHOOK_URL = "https://hook.eu1.make.com/ppcaoxcevwma6pcy04wr1ie3ajwg851m"; 

        // DOM Elements
        const lettersContainer = document.getElementById('dynamic-letters-container');
        const fab = document.getElementById('fab-write');
        const modal = document.getElementById('write-modal');
        const closeModal = document.getElementById('close-modal');
        const sendBtn = document.getElementById('send-letter-btn');
        const senderInput = document.getElementById('sender-input');
        const headingInput = document.getElementById('heading-input');
        const messageInput = document.getElementById('message-input');

        // --- ThreeJS Setup ---
        const PARTICLE_COUNT = 4000;
        const GALAXY_RADIUS = 30;
        const HEART_SIZE = 15;
        const COLORS = [0xff69b4, 0xff1493, 0xdda0dd, 0xffffff, 0x87ceeb];

        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 50;

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); // Limit pixel ratio for performance on high-res mobiles
        container.appendChild(renderer.domElement);

        function createStarTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 32; canvas.height = 32;
            const ctx = canvas.getContext('2d');
            const grad = ctx.createRadialGradient(16, 16, 0, 16, 16, 16);
            grad.addColorStop(0, 'rgba(255, 255, 255, 1)');
            grad.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, 32, 32);
            return new THREE.CanvasTexture(canvas);
        }

        const geometry = new THREE.BufferGeometry();
        const positions = []; const initialPositions = []; const heartPositions = []; const colors = []; const sizes = [];
        const colorObj = new THREE.Color();

        for (let i = 0; i < PARTICLE_COUNT; i++) {
            const r = Math.random() * GALAXY_RADIUS;
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos((Math.random() * 2) - 1);
            const x = r * Math.sin(phi) * Math.cos(theta);
            const y = r * Math.sin(phi) * Math.sin(theta);
            const z = r * Math.cos(phi) * 0.5;
            positions.push(x, y, z); initialPositions.push(x, y, z);
            colorObj.setHex(COLORS[Math.floor(Math.random() * COLORS.length)]);
            colors.push(colorObj.r, colorObj.g, colorObj.b);
            sizes.push(Math.random() * 0.5 + 0.1);
        }

        for (let i = 0; i < PARTICLE_COUNT; i++) {
            let t = Math.random() * Math.PI * 2;
            const x = HEART_SIZE * (16 * Math.pow(Math.sin(t), 3)) / 16;
            const y = HEART_SIZE * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t)) / 16;
            const z = (Math.random() - 0.5) * 5;
            heartPositions.push(x, y, z);
        }

        geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
        geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1));

        const material = new THREE.PointsMaterial({
            size: 0.5, vertexColors: true, map: createStarTexture(), blending: THREE.AdditiveBlending, depthWrite: false, transparent: true, opacity: 0.9
        });
        const particles = new THREE.Points(geometry, material);
        scene.add(particles);

        // Responsive Camera Logic
        function handleResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);

            // Zoom out on mobile portrait to fit the galaxy
            if(window.innerWidth < 768) {
                camera.position.z = 70; // Move camera back
            } else {
                camera.position.z = 50; // Desktop standard
            }
        }
        // Call once on init
        handleResize();
        window.addEventListener('resize', handleResize);

        // Interaction
        let mouseX = 0; let mouseY = 0;
        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth / 2) * 0.05;
            mouseY = (e.clientY - window.innerHeight / 2) * 0.05;
        });

        // Touch Interaction fix for mobile
        document.addEventListener('touchmove', (e) => {
             // Only rotate galaxy if we aren't scrolling the page
            if(window.scrollY < 50) {
                 const touch = e.touches[0];
                 mouseX = (touch.clientX - window.innerWidth / 2) * 0.05;
                 mouseY = (touch.clientY - window.innerHeight / 2) * 0.05;
            }
        }, { passive: true });


        let isHeartForming = false;
        function onInteractStart(e) {
            // Only trigger heart if clicking background (not modal or paper)
            if (e.target.closest('.paper') || e.target.closest('#fab-write') || e.target.closest('#write-modal')) return;
            isHeartForming = true;
        }
        function onInteractEnd() { isHeartForming = false; }
        
        document.addEventListener('mousedown', onInteractStart);
        document.addEventListener('mouseup', onInteractEnd);
        document.addEventListener('touchstart', onInteractStart);
        document.addEventListener('touchend', onInteractEnd);

        const clock = new THREE.Clock();
        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();
            
            // Subtle rotation
            particles.rotation.y += 0.002;
            // Mouse/Touch influence (dampened)
            particles.rotation.x += (mouseY * 0.001 - particles.rotation.x) * 0.05;
            particles.rotation.z += (mouseX * 0.001 - particles.rotation.z) * 0.05;

            if(isHeartForming) {
                particles.scale.setScalar(THREE.MathUtils.lerp(particles.scale.x, 1.2 + Math.sin(time*3)*0.05, 0.1));
            } else {
                particles.scale.set(1,1,1);
            }

            const pos = geometry.attributes.position.array;
            for(let i=0; i<PARTICLE_COUNT; i++) {
                const ix = i*3;
                let tx, ty, tz;
                if(isHeartForming) {
                    tx = heartPositions[ix]; ty = heartPositions[ix+1]; tz = heartPositions[ix+2];
                } else {
                    tx = initialPositions[ix] + Math.sin(time+i)*0.2;
                    ty = initialPositions[ix+1] + Math.cos(time+i*0.5)*0.2;
                    tz = initialPositions[ix+2] + Math.sin(time+i*0.2)*0.2;
                }
                pos[ix] += (tx - pos[ix]) * 0.08;
                pos[ix+1] += (ty - pos[ix+1]) * 0.08;
                pos[ix+2] += (tz - pos[ix+2]) * 0.08;
            }
            geometry.attributes.position.needsUpdate = true;
            renderer.render(scene, camera);
        }
        animate();

        // --- Firebase Logic ---
        
        async function initMessenger() {
            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                await auth.signInWithCustomToken(__initial_auth_token);
            } else {
                await auth.signInAnonymously();
            }

            auth.onAuthStateChanged((user) => {
                if (user) {
                    subscribeToLetters(user);
                }
            });
        }

        function subscribeToLetters(user) {
            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('oyuka-letters')
                .orderBy('timestamp', 'desc')
                .onSnapshot((snapshot) => {
                    lettersContainer.innerHTML = ''; 
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        renderLetter(data);
                    });
                }, (error) => {
                    console.error("Error fetching letters:", error);
                });
        }

        function renderLetter(data) {
            const div = document.createElement('div');
            div.className = 'paper';
            
            const date = data.timestamp ? new Date(data.timestamp.toDate()).toLocaleDateString() : 'Just now';
            const formattedMsg = data.text ? data.text.replace(/\n/g, '<br>') : '';
            // Use saved heading or fallback to "Dear Oyuka," for older data
            const heading = data.heading || 'Dear Oyuka,';

            div.innerHTML = `
                <div class="paper-date">${date}</div>
                <h2>${heading}</h2>
                <p>${formattedMsg}</p>
                <div class="signature">
                    From,<br>
                    ${data.sender || 'Juice'}
                </div>
            `;
            lettersContainer.appendChild(div);
        }

        sendBtn.addEventListener('click', async () => {
            const sender = senderInput.value.trim() || 'Juice';
            const text = messageInput.value.trim();
            const heading = headingInput.value.trim() || 'Dear Oyuka,'; // Capture Heading

            if (!text) return;
            
            if (sendBtn.disabled) return;
            sendBtn.disabled = true;

            const user = auth.currentUser;
            if (!user) {
                sendBtn.disabled = false;
                return;
            }

            sendBtn.innerText = "Sending...";
            
            try {
                await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('oyuka-letters').add({
                    sender: sender,
                    heading: heading, // Save the heading!
                    text: text,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    userId: user.uid
                });
                
                triggerSMSWebhook(sender, text);
                
                messageInput.value = '';
                toggleModal(false);
                lettersContainer.scrollIntoView({ behavior: 'smooth' });

            } catch (e) {
                console.error("Error sending letter", e);
                sendBtn.innerText = "Error (Try Again)";
            } finally {
                sendBtn.disabled = false;
                sendBtn.innerText = "Send to the Stars";
            }
        });
        
        async function triggerSMSWebhook(sender, text) {
            if (!SMS_WEBHOOK_URL) return;
            try {
                await fetch(SMS_WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ sender: sender, message: text, date: new Date().toISOString() })
                });
            } catch (err) {
                console.error("Failed to trigger SMS webhook:", err);
            }
        }

        function toggleModal(show) {
            if(show) {
                modal.classList.add('active');
                // Auto focus text area on open
                setTimeout(() => messageInput.focus(), 100);
            } else {
                modal.classList.remove('active');
            }
        }

        fab.addEventListener('click', () => toggleModal(true));
        closeModal.addEventListener('click', () => toggleModal(false));
        modal.addEventListener('click', (e) => {
            if(e.target === modal) toggleModal(false);
        });

        window.onload = () => {
            const loader = document.getElementById('loader');
            loader.style.opacity = 0;
            setTimeout(() => loader.style.display = 'none', 1000);
            
            gsap.to("#main-title", { duration: 2, opacity: 1, y: 0, ease: "power3.out", delay: 0.5 });
            gsap.to("#subtitle", { duration: 2, opacity: 1, ease: "power3.out", delay: 1.5 });
            
            initMessenger();
        };

    </script>
</body>
</html>
